# Rule

## ゲームの目的

このゲームは、自分の兵士（ソルジャー）を手元から対岸まで移動させ、対岸に到達すると勝利する一人用のシンプルなゲームです。

## プレイヤーとソルジャー

プレイヤーはあなた一人です。
あなたは1体のソルジャーを操作します。

## フィールド（ゲーム盤）

フィールドは3×3のマス目で構成されています。

## ゲームの始め方

ゲームは、ソルジャーがあなたの手元からフィールドに入ることで始まります。
ソルジャーのスタート位置は、フィールドの中央の行（2行目）の一番左のマス（1列目）です。

## 操作方法

あなたは方向キーでソルジャーを動かすことができます。
ソルジャーは「右」に1マスずつしか進めません。
右以外の方向を選ぶと、エラーメッセージが表示されます。
ソルジャーを動かした後、次の操作を待ちます。

## 勝利条件
ソルジャーを右に動かし続け、フィールドの右端を超えると勝利です。
具体的には、フィールドの3列目よりも右（4列目）に到達するとゲームクリアとなります。

# 処理概要
## ゲームの基本設定
- プレイヤー管理
    - プレイヤーはplayer1のみで、一人プレイを想定。
    - 各プレイヤーは1体のソルジャーを持つ。
- フィールドの設定
    - フィールドは2次元リストmap_xで管理。
    - サイズは3x3。
    - 各マスの初期値は0。

## 初期位置の設定
- ソルジャーの初期位置はmap_x[1][0]（2行目の1列目）。
    - 行インデックス：1
    - 列インデックス：0
- ソルジャーをフィールド上に配置する際、対応するマスに1を設定。
    - map_x[1][0] = 1

## 操作の処理
- 入力受付
    - プレイヤーからの方向キー入力を受け付ける。
    - 有効な入力は"right"のみ。
- 入力検証
    - 入力が"right"以外の場合、アラートメッセージを返す。
    - 正しい入力の場合、以下の移動処理を行う。
- 移動処理
    - 現在のソルジャー位置を取得し、その位置の値を0に戻す。
        - map_x[soldier_position[0]][soldier_position[1]] = 0
    - ソルジャーの列インデックスを+1して右に移動。
        - soldier_position[1] += 1
    - 新しい位置がフィールド内の場合、そのマスに1を設定。
        - map_x[soldier_position[0]][soldier_position[1]] = 1

##  勝利条件の判定
- ソルジャーの列インデックスがフィールドの幅を超えた場合、勝利と判定。
    - if soldier_position[1] > field_width - 1:
- 勝利時の処理
    - ゲームの勝利フラグgame_wonをTrueに設定。
    - 勝利メッセージを返し、以降の入力を無効化。

## ゲーム状態の管理
- Gameクラスでゲーム全体の状態を管理。
    - フィールドmap_x
    - ソルジャーの位置soldier_position
    - 勝利フラグgame_won
- サーバーサイドでグローバルなgameインスタンスを操作。

## エンドポイントの構成（FastAPI）
- GET /start：ゲームの初期化と開始。
    - 新しいGameインスタンスを作成し、初期状態を返す。
- POST /move：プレイヤーの入力を受け付け、ゲーム状態を更新。
    - リクエストボディでdirectionを受け取り、move_soldierメソッドで処理。
